---
layout: layout.html
title: Useful snippets | search
---

<div class="field">
  <label for="searchField">Search</label>
  <input type="search" placeholder="Seach..." id="searchField" />
</div>
<ol id="searchResults"></ol>
<div id="noResultsFound" style="display: none">
  <p>No results found</p>
</div>
<!--Only 5.7kb GZipped. You may want to bundle this with your application code. -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/elasticlunr/0.9.6/elasticlunr.min.js"></script>
<script>
  (function (window, document) {
    "use strict";

    const search = (e) => {
      const results = window.searchIndex.search(e.target.value, {
        bool: "OR",
        expand: true,
      });

      const resElement = document.getElementById("searchResults");
      const noResultsElement = document.getElementById("noResultsFound");

      resElement.innerHTML = "";

      if (results) {
        noResultsElement.style.display = "none";
        results.map((r) => {
          console.log(r);
          const { id, title } = r.doc;
          const el = document.createElement("li");
          resElement.appendChild(el);

          const h3 = document.createElement("h3");
          el.appendChild(h3);

          const a = document.createElement("a");
          a.setAttribute("href", id);
          a.textContent = title;
          h3.appendChild(a);
        });
      } else {
        noResultsElement.style.display = "block";
      }
    };

    fetch("/search-index.json").then((response) =>
      response.json().then((rawIndex) => {
        window.searchIndex = elasticlunr.Index.load(rawIndex);
        document
          .getElementById("searchField")
          .addEventListener("input", search);
      })
    );
  })(window, document);
</script>
<!-- <script src="./search.js"></script> -->
